<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <title>Mega Bezel Config Tool</title>
        <link rel="stylesheet" href="assets/bootstrap/bootstrap.css">
        <link rel="stylesheet" href="assets/bootstrap/bootstrap-icons.min.css">
        <link rel="stylesheet" href="assets/OwlCarousel/owl.carousel.css">
        <link rel="stylesheet" href="assets/plyr/plyr.css">
        <link rel="stylesheet" href="assets/layout.css">
    </head>
    <body>
        <div class="container-fluid">
            <header class="site-header">
                <div class="logo">Bezel Preset Editor</div>
                <nav class="nav-tabs">
                    <a href="#" class="nav-link active" data-bezel="mega">Mega Bezel</a>
                    <a href="#" class="nav-link" data-bezel="koko">Koko-aio</a>
                    <a href="#" class="nav-link" data-bezel="uborder">Uborder</a>
                    <button id="themes-button" class="nav-link" data-bezel="themes">Themes</button>
                    <button id="help-button" class="nav-link" data-bezel="help">?</button>
                </nav>
            </header>
            <div class="config-container">
                <!-- STATIC FIRST LINE (Always present, acts as the toggle header) -->
                <div class="ref-input-wrapper" id="staticFirstLineWrapper">
                    <span class="toggle-symbol hidden" id="ref-toggle-symbol">▼</span>
                    <label for="reference-0" class="reference-path-label">#reference </label>
                    <input type="text" class="reference-path-input" id="reference-0" placeholder="&quot;..\..\..\shaders_slang\bezel\Mega_Bezel\Presets\Base_CRT_Presets\MBZ__3__STD__GDV.slangp&quot;">
                    <button id="addReferenceLineButton" class="reset-button">+</button>
                </div>

                <!-- DYNAMIC CONTAINER (Where extra lines are added below the first) -->
                <div id="dynamicReferenceContainer" class="reference-content hidden">
                    <!-- JavaScript adds lines here -->
                </div>
            </div>
            <div class="settings-wrapper-scrollable" id="settingsWrapper">
                <div id="settingsLoading" class="retro-loading-overlay">
                    <div class="fullscreen-effects"></div>
                    <div class="crt-box">
                        <span class="loading-text">Loading...</span>
                        <div class="progress-container">
                            <div class="progress-fill"></div>
                        </div>
                    </div>
                </div>
                <div id="settingsContainer"></div>
            </div>
            <!-- Container for Buttons -->
            <div class="button-group config-container">
                <button class="hidden" id="scrollToTop" title="Settings Top">
                    <i class="bi bi-arrow-up"></i>
                </button>
                
                <!-- Generate Button (User Preference: card-text) -->
                <button id="createConfigButton" title="Settings to Text">
                    <i class="bi bi-card-text"></i>
                </button>
                
                <input type="file" id="loadConfigInput" accept=".params, .pre, .slangp" style="display: none;">
                
                <button id="loadConfigButton" title="Load New File">
                    <i class="bi bi-cloud-upload"></i> <!-- Using bi-cloud-upload as a standard "upload" icon -->
                </button>
                
                <input type="file" id="mergeConfigInput" accept=".params, .pre, .slangp" style="display: none;">
                
                <button class="hidden" id="mergeConfigButton" title="Merge File">
                    <i class="bi bi-layers"></i> 
                </button>
                
                <button id="saveConfigButton" title="Save File">
                    <i class="bi bi-floppy"></i>
                </button>
                
                <button id="addLabelsButton" title="Add Section Labels">
                    <i class="bi bi-tags"></i>
                </button>
                <div class="right-aligned-controls">
                    <a href="#" role="button" data-bs-toggle="modal" data-bs-target="#colorPickerModal"
                    title="Color Vision">
                        <i class="bi bi-eyedropper"></i>
                    </a>

                    <a href="#" class="thief" role="button" data-bs-toggle="modal" data-bs-target="#colorThiefModal"
                    data-link="color-thief.html" title="Color Thief">
                        <i class="bi bi-palette"></i>
                    </a>

                    <a href="#" id="quickNavButton" role="button" data-bs-toggle="modal"
                    data-bs-target="#quickNavModal" title="Quick Navigation">
                        <i class="bi bi-search"></i>
                    </a>

                    <a href="#" id="clearAllButton" role="button" title="Clear All Settings">
                        <i class="bi bi-arrow-clockwise"></i>
                    </a>

                    <a href="#" id="entertainmentBtn" role="button"
                    data-bs-toggle="modal" data-bs-target="#entertainmentModal"
                    title="Entertainment Loader">
                        <i class="bi bi-collection-play"></i>
                    </a>
                </div>
            </div>

            <div class="config-container config-wrapper">
                <div class="textarea-pair-wrapper" id="dropZone">
                    <textarea id="outputConfig" placeholder="Drag and drop your .slangp, .pre, or .params file here..."></textarea>
                    <div id="outputName" class="file-name-display"></div>
                </div>
                <div id="mergedWrapper" class="textarea-pair-wrapper hidden">
                    <textarea id="mergedOutputConfig" placeholder="Merged File..."></textarea>
                    <div id="mergedName" class="file-name-display"></div>
                </div>
            </div>
            <footer class="site-footer">
                <div class="credit design">
                    <a class="button watermark" href="https://forums.libretro.com/t/hgoda90-bezel-preset-editor/44230"></a>
                    <em>Designed by hgoda90&emsp;</em>
                </div>
            </footer>
        </div>
    </div>
    <div class="modal modal-lg fade" id="quickNavModal" tabindex="-1" aria-labelledby="quickNavModalTitle" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered modal-dialog-scrollable"> 
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="quickNavModalTitle"><i class="bi bi-list-nested me-2"></i>Quick Navigation</h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" id="modalCloseButton" aria-label="Close"></button>
                </div>
                <div class="modal-body" id="modal-links-container">
                </div>
            </div>
        </div>
    </div>
    <div class="modal modal-lg fade" id="colorPickerModal" tabindex="-1" aria-labelledby="colorPickerModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="modal-swap" 
                    bs-toggle="tooltip" data-bs-placement="top" title="Swap to Color Thief" onclick="swapModals('colorPickerModal', 'colorThiefModal')">
                            <i class="bi bi-arrow-left-right"></i>
                    </button>
                    <h5 class="modal-title" id="colorPickerModalLabel" style="margin: 0 16px;">Color Vision</h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close" style="margin-right: 0px;"></button>
                </div>
                <div class="modal-body">
                    <input type="color" id="colorPickerInput" class="dropper form-control form-control-color">
                    <input type="text" id="colorTextInput" class="form-control" placeholder="#RRGGBB, rgb(r,g,b), hsl(0deg, 0%, 0%) or hsb(0deg, 0%, 0%)">
                    <p class="mb-1 mt-3"></p>
                    <textarea id="convertedColorOutput" class="form-control" rows="5" readonly></textarea>
                    <div class="preview-wrap mbz">
                        <div class="preview-bezel">
                            <span class="bezel-color"></span>
                            <img src="assets/images/preview/mbz_bezel.png">
                        </div>
                        <img class="preview-screen" src="assets/images/preview/screen/mbz_generic.png">
                        <img class="preview-bg" src="assets/images/preview/mbz_bg.png">
                    </div>
                    <div class="info alert" style="display: none;"></div>
                    <hr>
                    <div class="owl-wrapper">
                        <div class="owl-carousel">
                            <div class="sample" id="a26">
                                <div class="colors"></div>
                                <h4 class="color-title">Atari 2600</h4>
                            </div>
                            <div class="sample" id="dc">
                                <div class="colors"></div>
                                <h4 class="color-title">Dreamcast</h4>
                            </div>
                            <div class="sample" id="fc">
                                <div class="colors"></div>
                                <h4 class="color-title">Famicom</h4>
                            </div>
                            <div class="sample" id="gc">
                                <div class="colors"></div>
                                <h4 class="color-title">GameCube</h4>
                            </div>
                            <div class="sample" id="n64">
                                <div class="colors"></div>
                                <h4 class="color-title">Nintendo 64</h4>
                            </div>
                            <div class="sample" id="nes">
                                <div class="colors"></div>
                                <h4 class="color-title">NES</h4>
                            </div>
                            <div class="sample" id="ps">
                                <div class="colors"></div>
                                <h4 class="color-title">PlayStation</h4>
                            </div>
                            <div class="sample" id="ps2">
                                <div class="colors"></div>
                                <h4 class="color-title">PlayStation 2</h4>
                            </div>
                            <div class="sample" id="sfc">
                                <div class="colors"></div>
                                <h4 class="color-title">Super Famicom</h4>
                            </div>
                            <div class="sample" id="snes">
                                <div class="colors"></div>
                                <h4 class="color-title">Super Nintendo</h4>
                            </div>
                        </div>
                    </div>
                    <div class="color-code" style="text-align: center; margin-top: 20px;"></div>
                </div>
                <div class="modal-footer">
                    <button id="pushConfigButton" class="btn btn-primary">
                        Copy Color
                    </button>
                </div>
            </div>
        </div>
    </div>
    <div class="modal modal-lg fade" id="colorThiefModal" tabindex="-1" aria-labelledby="colorThiefModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="modal-swap" 
                    bs-toggle="tooltip" data-bs-placement="top" title="Swap to Color Vision" onclick="swapModals('colorThiefModal', 'colorPickerModal')">
                        <i class="bi bi-arrow-left-right"></i>
                    </button>
                    <h5 class="modal-title" id="colorThiefModalLabel">Color Thief</h5>
                    <span class="logo-credit ms-3" style="font-size: 0.8rem;">by Lokesh Dhakar</span>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close" style="margin-right: 0px;"></button>
                </div>
                <div class="modal-body p-0"> 
                    <iframe src="assets/color-thief/index.html" title="Color Thief" width="100%" height="530px"></iframe>
                </div>
            </div>
        </div>
    </div>
<div class="modal fade modal-lg" id="helpModal" tabindex="-1" aria-labelledby="helpModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered modal-xl">
    <div class="modal-content">

      <div class="modal-header">
        <h5 class="modal-title" id="helpModalLabel">Help</h5>
        <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>

      <div class="modal-body" style="max-height:80vh; overflow-y:auto; padding:1rem 2rem;">

        <!-- SECTION: Settings Controls -->
        <h5 class="section-header">Settings Controls</h5>
        <div class="row gx-3 gy-2 mb-4">

          <div class="col-12 d-flex align-items-center p-2 rounded" style="background:#333;">
            <div class="ms-2 me-3">
              <input type="checkbox" class="setting-checkbox" checked disabled>
            </div>
            <div>
              Setting Checkbox
              <div class="text-muted small">Toggles whether a setting is active. Unchecked items are ignored in the output preset.</div>
            </div>
          </div>

          <div class="col-12 d-flex align-items-center p-2 rounded" style="background:#333;">
            <div class="ms-2 me-3">
              <button class="reset-button" disabled>R</button>
            </div>
            <div>
              Reset Button
              <div class="text-muted small">Resets the parameter to its default value without affecting other settings.</div>
            </div>
          </div>

          <div class="col-12 d-flex align-items-center p-2 rounded" style="background:#333;">
            <div class="ms-2 me-3">
              <input type="number" class="form-control form-control-sm" style="width:80px;" disabled>
            </div>
            <div>
              Value Input
              <div class="text-muted small">Numeric input controlling a parameter. Values are validated in real-time with proper step, min, and max limits.</div>
            </div>
          </div>

        </div>

        <!-- SECTION: Reference Lines -->
        <h5 class="section-header">Reference Lines</h5>
        <div class="row gx-3 gy-2 mb-4">

          <div class="col-12 d-flex align-items-center p-2 rounded" style="background:#333;">
            <div class="ms-2 me-3">
              <button class="reset-button" disabled>+</button>
            </div>
            <div>
              Add Reference Line
              <div class="text-muted small">Adds a new reference line at the top. Useful for headers, notes, or metadata.</div>
            </div>
          </div>

          <div class="col-12 d-flex align-items-center p-2 rounded" style="background:#333;">
            <div class="ms-2 me-3">
              <button class="reset-button" disabled>x</button>
            </div>
            <div>
              Remove Reference Line
              <div class="text-muted small">Deletes the selected reference line. Only affects metadata lines, not actual settings.</div>
            </div>
          </div>

          <div class="col-12 d-flex align-items-center p-2 rounded" style="background:#333;">
            <div class="mx-3">
              <span class="toggle-symbol m-0">▼</span>
            </div>
            <div>
              Collapse/Expand
              <div class="text-muted small">Collapses or expands the reference section to reduce visual clutter.</div>
            </div>
          </div>

        </div>

 <!-- SECTION: Toolbar Buttons -->
        <h5 class="section-header">Toolbar Buttons</h5>
        <div class="row gx-3 gy-2 mb-4">

            <!-- Existing toolbar buttons -->
            <div class="col-12 d-flex align-items-center p-2 rounded" style="background:#333;">
            <div class="ms-2 me-3"><i class="bi bi-arrow-up"></i></div>
            <div>
                Scroll to Top
                <div class="text-muted small">Jump to the top of the settings list.</div>
            </div>
            </div>

            <div class="col-12 d-flex align-items-center p-2 rounded" style="background:#333;">
            <div class="ms-2 me-3"><i class="bi bi-card-text"></i></div>
            <div>
                Settings → Text
                <div class="text-muted small">Populate text area with current settings.</div>
            </div>
            </div>

            <div class="col-12 d-flex align-items-center p-2 rounded" style="background:#333;">
            <div class="ms-2 me-3"><i class="bi bi-cloud-upload"></i></div>
            <div>
                Load File
                <div class="text-muted small">Load a preset file from disk.</div>
            </div>
            </div>

            <div class="col-12 d-flex align-items-center p-2 rounded" style="background:#333;">
            <div class="ms-2 me-3"><i class="bi bi-layers"></i></div>
            <div>
                Merge File
                <div class="text-muted small">Combine another preset with current settings.</div>
            </div>
            </div>

            <div class="col-12 d-flex align-items-center p-2 rounded" style="background:#333;">
            <div class="ms-2 me-3"><i class="bi bi-floppy"></i></div>
            <div>
                Save File
                <div class="text-muted small">Save your current preset to disk.</div>
            </div>
            </div>

            <div class="col-12 d-flex align-items-center p-2 rounded" style="background:#333;">
            <div class="ms-2 me-3"><i class="bi bi-tags"></i></div>
            <div>
                Add Section Labels
                <div class="text-muted small">Add labels to organize settings visually.</div>
            </div>
            </div>

            <div class="col-12 d-flex align-items-center p-2 rounded" style="background:#333;">
            <div class="ms-2 me-3"><i class="bi bi-eyedropper"></i></div>
            <div>
                Color Vision
                <div class="text-muted small">Preview bezel in selected color.</div>
            </div>
            </div>

            <div class="col-12 d-flex align-items-center p-2 rounded" style="background:#333;">
            <div class="ms-2 me-3"><i class="bi bi-palette"></i></div>
            <div>
                Color Thief
                <div class="text-muted small">Sample colors from an image.</div>
            </div>
            </div>

            <div class="col-12 d-flex align-items-center p-2 rounded" style="background:#333;">
            <div class="ms-2 me-3"><i class="bi bi-search"></i></div>
            <div>
                Quick Navigation
                <div class="text-muted small">Jump to a specific setting quickly.</div>
            </div>
            </div>

            <div class="col-12 d-flex align-items-center p-2 rounded" style="background:#333;">
            <div class="ms-2 me-3"><i class="bi bi-arrow-clockwise"></i></div>
            <div>
                Clear All Settings
                <div class="text-muted small">Reset all settings to defaults.</div>
            </div>
            </div>

            <!-- Entertainment Center Button -->
            <div class="col-12 d-flex align-items-center p-2 rounded" style="background:#333;">
            <div class="ms-2 me-3"><i class="bi bi-collection-play"></i></div>
            <div>
                Entertainment Loader
                <div class="text-muted small">Opens the MiniPlayer modal to add YouTube, Twitch, or local videos.</div>
            </div>
            </div>
        </div>

        <!-- SECTION: MiniPlayer Buttons -->
        <h5 class="section-header">MiniPlayer Controls</h5>
        <div class="row gx-3 gy-2 mb-4">

            <div class="col-12 d-flex align-items-center p-2 rounded" style="background:#333;">
            <div class="ms-2 me-3"><i class="bi bi-arrows-move"></i></div>
            <div>
                Drag Button
                <div class="text-muted small">Click and drag to move the MiniPlayer. Double-click resets its position.</div>
            </div>
            </div>

            <div class="col-12 d-flex align-items-center p-2 rounded" style="background:#333;">
            <div class="ms-2 me-3"><i class="bi bi-zoom-in"></i></div>
            <div>
                Zoom Button
                <div class="text-muted small">Cycles through preset MiniPlayer sizes; 276p, 360p, 480p, 720p.</div>
            </div>
            </div>

            <div class="col-12 d-flex align-items-center p-2 rounded" style="background:#333;">
            <div class="ms-2 me-3"><i class="bi bi-x-lg"></i></div>
            <div>
                Close Button
                <div class="text-muted small">Closes the MiniPlayer and stops any playing video or stream.</div>
            </div>
            </div>

            <div class="col-12 d-flex align-items-center p-2 rounded" style="background:#333;">
            <div class="ms-2 me-3"><i class="bi bi-play-circle"></i></div>
            <div>
                Add / Load Button
                <div class="text-muted small">Load YouTube, Twitch, or local video depending on the selected tab in the MiniPlayer modal.</div>
            </div>
            </div>

        </div>


        <!-- SECTION: Workflow Summary -->
        <h5 class="section-header">Workflow Summary</h5>
        <ul class="list-unstyled text-muted small mb-0">
          <li class="mb-1">Load a preset file to begin editing.</li>
          <li class="mb-1">Edit settings using checkboxes, inputs, and reference lines.</li>
          <li class="mb-1">Use <i class="bi bi-card-text"></i> to view or edit raw config.</li>
          <li>Save your preset to preserve changes.</li>
        </ul>
      </div>
    </div>
  </div>
</div>
<div class="modal fade modal-lg" id="uiThemesModal" tabindex="-1">
  <div class="modal-dialog modal-dialog-centered modal-xl">
    <div class="modal-content current-theme">
      <div class="modal-header">
        <h5 class="modal-title">UI Themes</h5>
        <button type="button" class="btn-close btn-close-white me-0" data-bs-dismiss="modal"></button>
      </div>
      <div class="modal-body">
        <div class="settings-section">
          <div class="theme-grid">

            <!-- Amber -->
            <div class="theme-container">
              <button class="theme-swatch amber" data-theme="amber">Amber</button>
              <div class="theme-description">Amber Monitor</div>
            </div>

            <!-- Green -->
            <div class="theme-container">
              <button class="theme-swatch green" data-theme="green">Green</button>
              <div class="theme-description">Monochrome Monitor</div>
            </div>

            <!-- Code Dark -->
            <div class="theme-container">
              <button class="theme-swatch code" data-theme="code">Code</button>
              <div class="theme-description">Highlight.js Dark</div>
            </div>

            <!-- Code Light -->
            <div class="theme-container">
              <button class="theme-swatch code-light" data-theme="code-light">Code Light</button>
              <div class="theme-description">Highlight.js Light</div>
            </div>

            <!-- Notebook -->
            <div class="theme-container">
              <button class="theme-swatch notebook" data-theme="notebook">Notebook</button>
              <div class="theme-description">Black Pen on Cream Paper</div>
            </div>

            <!-- Pencil -->
            <div class="theme-container">
              <button class="theme-swatch pencil" data-theme="pencil">Pencil</button>
              <div class="theme-description">Notebook Paper with Pencil</div>
            </div>

            <!-- GLUI -->
            <div class="theme-container">
                <button class="theme-swatch glui" data-theme="glui">GLUI</button>
                <div class="theme-description">RetroArch GLUI Interface</div>
            </div>

            <!-- Ozone -->
            <div class="theme-container">
              <button class="theme-swatch ozone" data-theme="ozone">Ozone</button>
              <div class="theme-description">RetroArch's Default Theme</div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
<div class="modal fade" id="entertainmentModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered modal-lg">
        <div class="modal-content">

            <div class="modal-header">
                <h5 class="modal-title">Entertainment Loader</h5>
                <button type="button" class="btn-close btn-close-white me-0" data-bs-dismiss="modal"></button>
            </div>

            <div class="modal-body">

                <!-- Tabs -->
                <ul class="nav nav-tabs" id="entertainmentTabs" role="tablist">
                    <li class="nav-item" role="presentation">
                        <button class="nav-link active" id="yt-tab" data-bs-toggle="tab" data-bs-target="#ytPane" type="button" role="tab">
                            <i class="bi bi-youtube"></i> YouTube
                        </button>
                    </li>

                    <li class="nav-item" role="presentation">
                        <button class="nav-link" id="twitch-tab" data-bs-toggle="tab" data-bs-target="#twitchPane" type="button" role="tab">
                            <i class="bi bi-twitch"></i> Twitch
                        </button>
                    </li>

                    <li class="nav-item" role="presentation">
                        <button class="nav-link" id="local-tab" data-bs-toggle="tab" data-bs-target="#localPane" type="button" role="tab">
                            <i class="bi bi-file-earmark-play"></i> Local Video
                        </button>
                    </li>
                </ul>

                <!-- Tab Panes -->
                <div class="tab-content mt-3">

                    <!-- YouTube Tab -->
                    <div class="tab-pane fade show active" id="ytPane" role="tabpanel">
                        <div class="mb-3">
                            <label class="form-label">YouTube URL</label>
                            <input type="text" class="form-control" id="youtubeUrlInput" placeholder="https://www.youtube.com/watch?v=SXIdOvwf2Wk">
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Or select .yt file</label>
                            <input type="file" class="form-control" id="youtubeFileInput" accept=".yt">
                        </div>
                    </div>

                    <!-- Twitch Tab -->
                    <div class="tab-pane fade" id="twitchPane" role="tabpanel">
                        <div class="mb-3">
                            <label class="form-label">Twitch URL or Channel</label>
                            <input type="text" class="form-control" id="twitchUrlInput" placeholder="e.g. twitch.tv/somechannel">
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Or select .ttv or .ttvl file</label>
                            <input type="file" class="form-control" id="twitchFileInput" accept=".ttv,.ttvl">
                        </div>
                    </div>

                    <!-- Local Tab -->
                    <div class="tab-pane fade" id="localPane" role="tabpanel">
                        <div class="mb-3">
                            <label class="form-label">Select .mp4 File</label>
                            <input type="file" class="form-control" id="localFileInput" accept="video/mp4,video/webm,video/ogg">
                        </div>
                    </div>

                </div>

            </div>

            <div class="modal-footer">
                <!-- Buttons are dynamically added via JS -->
            </div>
        </div>
    </div>
</div>
        <script src="assets/jquery.js"></script>
        <script src="assets/OwlCarousel/owl.carousel.js"></script>
        <script src="assets/bootstrap/bootstrap.bundle.js"></script>
        <script src="assets/colorcolor/colorcolor.js"></script>
        <script src="assets/colorDatabase.js"></script>
        <script src="assets/functions.js"></script>
        <script src="assets/plyr/plyr.polyfilled.js"></script>
        <script src="assets/mini_player.js"></script>
        <script src="assets/Mega_Bezel/MBZ__3__STD__GDV.js" id="megaBezelScript"></script>
    </body>
</html>